version: 1
binary: ../target/release/ralpher

sandbox:
  workdir: temp
  inherit_env: true

tests:
  - name: "continue without config fails"
    steps:
      - name: run
        run:
          cmd: "${BINARY}"
          args: ["continue"]
        expect:
          exit: 1
          stderr:
            contains: "No ralpher.toml found"

  - name: "start without config fails"
    steps:
      - name: run
        run:
          cmd: "${BINARY}"
          args: ["start"]
        expect:
          exit: 1
          stderr:
            contains: "No ralpher.toml found"

  - name: "validate without config fails"
    steps:
      - name: run
        run:
          cmd: "${BINARY}"
          args: ["validate"]
        expect:
          exit: 1
          stderr:
            contains: "No ralpher.toml found"

  - name: "status without config shows message"
    steps:
      - name: run
        run:
          cmd: "${BINARY}"
          args: ["status"]
        expect:
          exit: 0
          stdout:
            contains: "No ralpher.toml found"

  - name: "abort without config shows message"
    steps:
      - name: run
        run:
          cmd: "${BINARY}"
          args: ["abort"]
        expect:
          exit: 0
          stdout:
            contains: "No ralpher.toml found"

  - name: "clean without config shows message"
    steps:
      - name: run
        run:
          cmd: "${BINARY}"
          args: ["clean"]
        expect:
          exit: 0
          stdout:
            contains: "No ralpher.toml found"
