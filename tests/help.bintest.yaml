version: 1
binary: ../target/release/ralpher

sandbox:
  workdir: temp
  inherit_env: true

tests:
  - name: "help flag shows usage"
    steps:
      - name: run
        run:
          cmd: "${BINARY}"
          args: ["--help"]
        expect:
          exit: 0
          stdout:
            contains: "A TUI that cooks AI development plans to completion"

  - name: "version flag shows version"
    steps:
      - name: run
        run:
          cmd: "${BINARY}"
          args: ["--version"]
        expect:
          exit: 0
          stdout:
            contains: "ralpher"

  - name: "help shows --status flag"
    steps:
      - name: run
        run:
          cmd: "${BINARY}"
          args: ["--help"]
        expect:
          exit: 0
          stdout:
            contains: "--status"

  - name: "help shows --validate flag"
    steps:
      - name: run
        run:
          cmd: "${BINARY}"
          args: ["--help"]
        expect:
          exit: 0
          stdout:
            contains: "--validate"

  - name: "help shows --abort flag"
    steps:
      - name: run
        run:
          cmd: "${BINARY}"
          args: ["--help"]
        expect:
          exit: 0
          stdout:
            contains: "--abort"

  - name: "help shows --clean flag"
    steps:
      - name: run
        run:
          cmd: "${BINARY}"
          args: ["--help"]
        expect:
          exit: 0
          stdout:
            contains: "--clean"

  - name: "help shows --start flag"
    steps:
      - name: run
        run:
          cmd: "${BINARY}"
          args: ["--help"]
        expect:
          exit: 0
          stdout:
            contains: "--start"

  - name: "help shows --iteration flag"
    steps:
      - name: run
        run:
          cmd: "${BINARY}"
          args: ["--help"]
        expect:
          exit: 0
          stdout:
            contains: "--iteration"
